// name: GenDoc.mos
// keywords: tests that GenerateDoc.mos script works fine!
// status: correct
// teardown_command: rm -rf *.html old-html-tmp "./-p" ModelicaDocumentation.* GenerateDoc.mos loadModel.mos tmp FilterTidy.sh FindFiles.sh Tidy.py fix-case-sensitive.py generate_icons.py log.txt style.css tidy.err tidy.filtered
//

system("rm -f *.html log.txt"); getErrorString();
echo(false);
gendoc := getInstallationDirectoryPath() + "/share/doc/omc/testmodels/GenerateDoc.mos";getErrorString();
echo(true);
setEnvironmentVar("GenerateDocTest", "YES"); getErrorString();
echo(true);
runScript(gendoc);
echo(true);
getErrorString();

"GenerateDoc.mos wrote " + String(size(items,1)) + " files";
"top level classes";
classNames;
"all classes recursive";
allClassNames;
system("ls *.html | wc -l", "log.txt"); getErrorString();
"Check how many .html files are on disk:";
readFile("log.txt"); getErrorString();

// Result:
// 0
// ""
// true
// true
// ""
// true
// true
// ""
// "GenerateDoc.mos wrote 508 files"
// "top level classes"
// {AssertionLevel,Connections,Correlation,Distribution,MetaModelica,OpenModelica,StateSelect,Subtask,TestGenerateDoc,abs,acos,activeState,actualStream,array,asin,assert,atan,atan2,backSample,cardinality,cat,ceil,change,classDirectory,constrain,cos,cosh,cross,delay,der,diagonal,div,edge,exp,fill,floor,getInstanceName,hold,homotopy,identity,inStream,initial,initialState,integer,interval,linspace,log,log10,matrix,max,min,mod,ndims,noClock,noEvent,ones,outerProduct,pre,previous,print,product,reinit,rem,sample,scalar,semiLinear,shiftSample,sign,sin,sinh,size,skew,smooth,spatialDistribution,sqrt,subSample,sum,superSample,symmetric,tan,tanh,terminal,ticksInState,timeInState,transition,transpose,vector,zeros}
// "all classes recursive"
// {AssertionLevel,Connections,Connections.branch,Connections.isRoot,Connections.potentialRoot,Connections.root,Connections.rooted,Connections.uniqueRoot,Connections.uniqueRootIndices,Correlation,Distribution,MetaModelica,MetaModelica.MetaModelica,MetaModelica.MetaModelica.Dangerous,MetaModelica.MetaModelica.Dangerous.arrayCreateNoInit,MetaModelica.MetaModelica.Dangerous.arrayGetNoBoundsChecking,MetaModelica.MetaModelica.Dangerous.arrayUpdateNoBoundsChecking,MetaModelica.MetaModelica.Dangerous.listReverseInPlace,MetaModelica.MetaModelica.Dangerous.listSetRest,MetaModelica.MetaModelica.Dangerous.stringGetNoBoundsChecking,MetaModelica.NONE,MetaModelica.SOME,MetaModelica.SourceInfo,MetaModelica.SourceInfo.SOURCEINFO,MetaModelica.anyString,MetaModelica.arrayAppend,MetaModelica.arrayCopy,MetaModelica.arrayCreate,MetaModelica.arrayGet,MetaModelica.arrayLength,MetaModelica.arrayList,MetaModelica.arrayUpdate,MetaModelica.boolAnd,MetaModelica.boolEq,MetaModelica.boolNot,MetaModelica.boolOr,MetaModelica.boolString,MetaModelica.clock,MetaModelica.cons,MetaModelica.debug_print,MetaModelica.equality,MetaModelica.fail,MetaModelica.intAbs,MetaModelica.intAdd,MetaModelica.intBitAnd,MetaModelica.intBitLShift,MetaModelica.intBitNot,MetaModelica.intBitOr,MetaModelica.intBitRShift,MetaModelica.intBitXor,MetaModelica.intDiv,MetaModelica.intEq,MetaModelica.intGe,MetaModelica.intGt,MetaModelica.intLe,MetaModelica.intLt,MetaModelica.intMax,MetaModelica.intMin,MetaModelica.intMod,MetaModelica.intMul,MetaModelica.intNe,MetaModelica.intNeg,MetaModelica.intReal,MetaModelica.intString,MetaModelica.intStringChar,MetaModelica.intSub,MetaModelica.isNone,MetaModelica.isPresent,MetaModelica.isSome,MetaModelica.listAppend,MetaModelica.listArray,MetaModelica.listDelete,MetaModelica.listEmpty,MetaModelica.listGet,MetaModelica.listHead,MetaModelica.listLength,MetaModelica.listMember,MetaModelica.listRest,MetaModelica.listReverse,MetaModelica.listStringCharString,MetaModelica.printAny,MetaModelica.realAbs,MetaModelica.realAdd,MetaModelica.realDiv,MetaModelica.realEq,MetaModelica.realGe,MetaModelica.realGt,MetaModelica.realInt,MetaModelica.realLe,MetaModelica.realLt,MetaModelica.realMax,MetaModelica.realMin,MetaModelica.realMod,MetaModelica.realMul,MetaModelica.realNe,MetaModelica.realNeg,MetaModelica.realPow,MetaModelica.realString,MetaModelica.realSub,MetaModelica.referenceDebugString,MetaModelica.referenceEq,MetaModelica.setGlobalRoot,MetaModelica.setStackOverflowSignal,MetaModelica.sourceInfo,MetaModelica.stringAppend,MetaModelica.stringAppendList,MetaModelica.stringCharInt,MetaModelica.stringCharListString,MetaModelica.stringCompare,MetaModelica.stringDelimitList,MetaModelica.stringEq,MetaModelica.stringEqual,MetaModelica.stringGet,MetaModelica.stringGetStringChar,MetaModelica.stringHash,MetaModelica.stringHashDjb2,MetaModelica.stringHashDjb2Mod,MetaModelica.stringHashSdbm,MetaModelica.stringInt,MetaModelica.stringLength,MetaModelica.stringListStringChar,MetaModelica.stringReal,MetaModelica.stringUpdateStringChar,MetaModelica.substring,MetaModelica.tick,MetaModelica.valueConstructor,MetaModelica.valueEq,MetaModelica.valueHashMod,MetaModelica.valueSlots,OpenModelica,OpenModelica.$Code,OpenModelica.$Code.Expression,OpenModelica.$Code.ExpressionOrModification,OpenModelica.$Code.TypeName,OpenModelica.$Code.VariableName,OpenModelica.$Code.VariableNames,OpenModelica.Internal,OpenModelica.Internal.Architecture,OpenModelica.Internal.Architecture.integerMax,OpenModelica.Internal.Architecture.numBits,OpenModelica.Internal.BuiltinType,OpenModelica.Internal.intAbs,OpenModelica.Internal.intDiv,OpenModelica.Internal.intMod,OpenModelica.Internal.intRem,OpenModelica.Internal.realAbs,OpenModelica.Internal.realDiv,OpenModelica.Internal.realMod,OpenModelica.Internal.realRem,OpenModelica.Scripting,OpenModelica.Scripting.CheckSettingsResult,OpenModelica.Scripting.DiffFormat,OpenModelica.Scripting.ErrorKind,OpenModelica.Scripting.ErrorLevel,OpenModelica.Scripting.ErrorMessage,OpenModelica.Scripting.Experimental,OpenModelica.Scripting.Experimental.relocateFunctions,OpenModelica.Scripting.ExportKind,OpenModelica.Scripting.GC_expand_hp,OpenModelica.Scripting.GC_gcollect_and_unmap,OpenModelica.Scripting.Internal,OpenModelica.Scripting.Internal.FileType,OpenModelica.Scripting.Internal.Time,OpenModelica.Scripting.Internal.Time.readableTime,OpenModelica.Scripting.Internal.Time.timerClear,OpenModelica.Scripting.Internal.Time.timerTick,OpenModelica.Scripting.Internal.Time.timerTock,OpenModelica.Scripting.Internal.stat,OpenModelica.Scripting.LinearSystemSolver,OpenModelica.Scripting.SourceInfo,OpenModelica.Scripting.StandardStream,OpenModelica.Scripting.addClassAnnotation,OpenModelica.Scripting.alarm,OpenModelica.Scripting.appendEnvironmentVar,OpenModelica.Scripting.basePlotFunction,OpenModelica.Scripting.basename,OpenModelica.Scripting.buildModel,OpenModelica.Scripting.buildModelFMU,OpenModelica.Scripting.buildOpenTURNSInterface,OpenModelica.Scripting.cd,OpenModelica.Scripting.checkAllModelsRecursive,OpenModelica.Scripting.checkCodeGraph,OpenModelica.Scripting.checkInterfaceOfPackages,OpenModelica.Scripting.checkModel,OpenModelica.Scripting.checkSettings,OpenModelica.Scripting.checkTaskGraph,OpenModelica.Scripting.classAnnotationExists,OpenModelica.Scripting.clear,OpenModelica.Scripting.clearCommandLineOptions,OpenModelica.Scripting.clearDebugFlags,OpenModelica.Scripting.clearMessages,OpenModelica.Scripting.clearProgram,OpenModelica.Scripting.clearVariables,OpenModelica.Scripting.closeSimulationResultFile,OpenModelica.Scripting.codeToString,OpenModelica.Scripting.compareFiles,OpenModelica.Scripting.compareFilesAndMove,OpenModelica.Scripting.compareSimulationResults,OpenModelica.Scripting.convertUnits,OpenModelica.Scripting.copyClass,OpenModelica.Scripting.countMessages,OpenModelica.Scripting.deleteFile,OpenModelica.Scripting.diffModelicaFileListings,OpenModelica.Scripting.diffSimulationResults,OpenModelica.Scripting.diffSimulationResultsHtml,OpenModelica.Scripting.directoryExists,OpenModelica.Scripting.dirname,OpenModelica.Scripting.dumpXMLDAE,OpenModelica.Scripting.echo,OpenModelica.Scripting.escapeXML,OpenModelica.Scripting.exit,OpenModelica.Scripting.exportToFigaro,OpenModelica.Scripting.extendsFrom,OpenModelica.Scripting.filterSimulationResults,OpenModelica.Scripting.generateCode,OpenModelica.Scripting.generateEntryPoint,OpenModelica.Scripting.generateHeader,OpenModelica.Scripting.generateScriptingAPI,OpenModelica.Scripting.generateSeparateCode,OpenModelica.Scripting.generateSeparateCodeDependencies,OpenModelica.Scripting.generateSeparateCodeDependenciesMakefile,OpenModelica.Scripting.getAlgorithmCount,OpenModelica.Scripting.getAlgorithmItemsCount,OpenModelica.Scripting.getAnnotationCount,OpenModelica.Scripting.getAnnotationVersion,OpenModelica.Scripting.getAstAsCorbaString,OpenModelica.Scripting.getAvailableIndexReductionMethods,OpenModelica.Scripting.getAvailableLibraries,OpenModelica.Scripting.getAvailableMatchingAlgorithms,OpenModelica.Scripting.getAvailableTearingMethods,OpenModelica.Scripting.getBooleanClassAnnotation,OpenModelica.Scripting.getBuiltinType,OpenModelica.Scripting.getCFlags,OpenModelica.Scripting.getCXXCompiler,OpenModelica.Scripting.getClassComment,OpenModelica.Scripting.getClassInformation,OpenModelica.Scripting.getClassNames,OpenModelica.Scripting.getClassRestriction,OpenModelica.Scripting.getClassesInModelicaPath,OpenModelica.Scripting.getCompileCommand,OpenModelica.Scripting.getCompiler,OpenModelica.Scripting.getComponentModifierNames,OpenModelica.Scripting.getComponentsTest,OpenModelica.Scripting.getComponentsTest.Component,OpenModelica.Scripting.getConfigFlagValidOptions,OpenModelica.Scripting.getDefaultOpenCLDevice,OpenModelica.Scripting.getDerivedClassModifierNames,OpenModelica.Scripting.getDerivedClassModifierValue,OpenModelica.Scripting.getDerivedUnits,OpenModelica.Scripting.getDocumentationAnnotation,OpenModelica.Scripting.getEnvironmentVar,OpenModelica.Scripting.getEquationCount,OpenModelica.Scripting.getEquationItemsCount,OpenModelica.Scripting.getErrorString,OpenModelica.Scripting.getImportCount,OpenModelica.Scripting.getIndexReductionMethod,OpenModelica.Scripting.getInheritedClasses,OpenModelica.Scripting.getInitialAlgorithmCount,OpenModelica.Scripting.getInitialAlgorithmItemsCount,OpenModelica.Scripting.getInitialEquationCount,OpenModelica.Scripting.getInitialEquationItemsCount,OpenModelica.Scripting.getInstallationDirectoryPath,OpenModelica.Scripting.getLanguageStandard,OpenModelica.Scripting.getLinker,OpenModelica.Scripting.getLinkerFlags,OpenModelica.Scripting.getLoadedLibraries,OpenModelica.Scripting.getMatchingAlgorithm,OpenModelica.Scripting.getMemorySize,OpenModelica.Scripting.getMessagesString,OpenModelica.Scripting.getMessagesStringInternal,OpenModelica.Scripting.getModelicaPath,OpenModelica.Scripting.getNoSimplify,OpenModelica.Scripting.getNthAlgorithm,OpenModelica.Scripting.getNthAlgorithmItem,OpenModelica.Scripting.getNthAnnotationString,OpenModelica.Scripting.getNthEquation,OpenModelica.Scripting.getNthEquationItem,OpenModelica.Scripting.getNthImport,OpenModelica.Scripting.getNthInitialAlgorithm,OpenModelica.Scripting.getNthInitialAlgorithmItem,OpenModelica.Scripting.getNthInitialEquation,OpenModelica.Scripting.getNthInitialEquationItem,OpenModelica.Scripting.getOrderConnections,OpenModelica.Scripting.getPackages,OpenModelica.Scripting.getParameterNames,OpenModelica.Scripting.getParameterValue,OpenModelica.Scripting.getSettings,OpenModelica.Scripting.getShowAnnotations,OpenModelica.Scripting.getSimulationOptions,OpenModelica.Scripting.getSourceFile,OpenModelica.Scripting.getTearingMethod,OpenModelica.Scripting.getTempDirectoryPath,OpenModelica.Scripting.getTimeStamp,OpenModelica.Scripting.getUsedClassNames,OpenModelica.Scripting.getUses,OpenModelica.Scripting.getVectorizationLimit,OpenModelica.Scripting.getVersion,OpenModelica.Scripting.help,OpenModelica.Scripting.iconv,OpenModelica.Scripting.importFMU,OpenModelica.Scripting.inferBindings,OpenModelica.Scripting.instantiateModel,OpenModelica.Scripting.isBlock,OpenModelica.Scripting.isClass,OpenModelica.Scripting.isConnector,OpenModelica.Scripting.isEnumeration,OpenModelica.Scripting.isExperiment,OpenModelica.Scripting.isFunction,OpenModelica.Scripting.isModel,OpenModelica.Scripting.isOperator,OpenModelica.Scripting.isOperatorFunction,OpenModelica.Scripting.isOperatorRecord,OpenModelica.Scripting.isOptimization,OpenModelica.Scripting.isPackage,OpenModelica.Scripting.isPartial,OpenModelica.Scripting.isProtectedClass,OpenModelica.Scripting.isRecord,OpenModelica.Scripting.isShortDefinition,OpenModelica.Scripting.isType,OpenModelica.Scripting.linearize,OpenModelica.Scripting.list,OpenModelica.Scripting.listFile,OpenModelica.Scripting.listVariables,OpenModelica.Scripting.loadFile,OpenModelica.Scripting.loadFileInteractive,OpenModelica.Scripting.loadFileInteractiveQualified,OpenModelica.Scripting.loadFiles,OpenModelica.Scripting.loadModel,OpenModelica.Scripting.loadModelica3D,OpenModelica.Scripting.loadString,OpenModelica.Scripting.mkdir,OpenModelica.Scripting.moveClass,OpenModelica.Scripting.moveClassToBottom,OpenModelica.Scripting.moveClassToTop,OpenModelica.Scripting.ngspicetoModelica,OpenModelica.Scripting.numProcessors,OpenModelica.Scripting.optimize,OpenModelica.Scripting.parseFile,OpenModelica.Scripting.parseString,OpenModelica.Scripting.plot,OpenModelica.Scripting.plotAll,OpenModelica.Scripting.plotParametric,OpenModelica.Scripting.readFile,OpenModelica.Scripting.readFileNoNumeric,OpenModelica.Scripting.readSimulationResult,OpenModelica.Scripting.readSimulationResultSize,OpenModelica.Scripting.readSimulationResultVars,OpenModelica.Scripting.realpath,OpenModelica.Scripting.regex,OpenModelica.Scripting.regexBool,OpenModelica.Scripting.regularFileExists,OpenModelica.Scripting.reloadClass,OpenModelica.Scripting.remove,OpenModelica.Scripting.removeComponentModifiers,OpenModelica.Scripting.removeExtendsModifiers,OpenModelica.Scripting.reopenStandardStream,OpenModelica.Scripting.rewriteBlockCall,OpenModelica.Scripting.runOpenTURNSPythonScript,OpenModelica.Scripting.runScript,OpenModelica.Scripting.runScriptParallel,OpenModelica.Scripting.save,OpenModelica.Scripting.saveAll,OpenModelica.Scripting.saveModel,OpenModelica.Scripting.saveTotalModel,OpenModelica.Scripting.saveTotalSCode,OpenModelica.Scripting.searchClassNames,OpenModelica.Scripting.setAnnotationVersion,OpenModelica.Scripting.setCFlags,OpenModelica.Scripting.setCXXCompiler,OpenModelica.Scripting.setCheapMatchingAlgorithm,OpenModelica.Scripting.setClassComment,OpenModelica.Scripting.setCommandLineOptions,OpenModelica.Scripting.setCompileCommand,OpenModelica.Scripting.setCompiler,OpenModelica.Scripting.setCompilerFlags,OpenModelica.Scripting.setCompilerPath,OpenModelica.Scripting.setDebugFlags,OpenModelica.Scripting.setDefaultOpenCLDevice,OpenModelica.Scripting.setDocumentationAnnotation,OpenModelica.Scripting.setEnvironmentVar,OpenModelica.Scripting.setIndexReductionMethod,OpenModelica.Scripting.setInitXmlStartValue,OpenModelica.Scripting.setInstallationDirectoryPath,OpenModelica.Scripting.setLanguageStandard,OpenModelica.Scripting.setLinker,OpenModelica.Scripting.setLinkerFlags,OpenModelica.Scripting.setMatchingAlgorithm,OpenModelica.Scripting.setModelicaPath,OpenModelica.Scripting.setNoSimplify,OpenModelica.Scripting.setOrderConnections,OpenModelica.Scripting.setPlotCommand,OpenModelica.Scripting.setPostOptModules,OpenModelica.Scripting.setPreOptModules,OpenModelica.Scripting.setShowAnnotations,OpenModelica.Scripting.setSourceFile,OpenModelica.Scripting.setTearingMethod,OpenModelica.Scripting.setTempDirectoryPath,OpenModelica.Scripting.setVectorizationLimit,OpenModelica.Scripting.simulate,OpenModelica.Scripting.solveLinearSystem,OpenModelica.Scripting.sortStrings,OpenModelica.Scripting.stringReplace,OpenModelica.Scripting.stringSplit,OpenModelica.Scripting.stringTypeName,OpenModelica.Scripting.stringVariableName,OpenModelica.Scripting.strtok,OpenModelica.Scripting.system,OpenModelica.Scripting.system_parallel,OpenModelica.Scripting.testsuiteFriendlyName,OpenModelica.Scripting.threadWorkFailed,OpenModelica.Scripting.translateGraphics,OpenModelica.Scripting.translateModelFMU,OpenModelica.Scripting.typeNameString,OpenModelica.Scripting.typeNameStrings,OpenModelica.Scripting.typeOf,OpenModelica.Scripting.uriToFilename,OpenModelica.Scripting.val,OpenModelica.Scripting.verifyCompiler,OpenModelica.Scripting.writeFile,OpenModelica.UsersGuide,OpenModelica.UsersGuide.ReleaseNotes,OpenModelica.threadData,StateSelect,Subtask,Subtask.SamplingType,Subtask.activated,Subtask.decouple,Subtask.lastInterval,TestGenerateDoc,abs,acos,activeState,actualStream,array,asin,assert,atan,atan2,backSample,cardinality,cat,ceil,change,classDirectory,constrain,cos,cosh,cross,delay,der,diagonal,div,edge,exp,fill,floor,getInstanceName,hold,homotopy,identity,inStream,initial,initialState,integer,interval,linspace,log,log10,matrix,max,min,mod,ndims,noClock,noEvent,ones,outerProduct,pre,previous,print,product,reinit,rem,sample,scalar,semiLinear,shiftSample,sign,sin,sinh,size,skew,smooth,spatialDistribution,sqrt,subSample,sum,superSample,symmetric,tan,tanh,terminal,ticksInState,timeInState,transition,transpose,vector,zeros}
// 0
// ""
// "Check how many .html files are on disk:"
// "508
// "
// ""
// endResult
